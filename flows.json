[{"id":"cc87e462.1e9328","type":"function","z":"7e9d9db3.9a92f4","name":"createReplyMessage","func":"//flowから取り出す\nvar output_text = flow.get(\"text\");\nvar replytext;\nvar oumu_mode;\n/*\nif(typeof tmp_it !== 'undefined'){\n    //tmp_it = tmp_it + \"\\n\" + flow.get(\"it\");\n}else{\n   var tmp_it = \"\";\n}*/\nif(flow.get(\"it\").match(/pallotmode$/)){\n    oumu_mode = true;\n}else{\n    oumu_mode = false;\n}\n\n    //tmp_it = tmp_it + \"\\n\" + flow.get(\"it\");\nif (oumu_mode === false){\n    replytext = msg.payload.optext;\n    \n}else{\n    replytext = flow.get(\"it\");\n    replytext = replytext.replace(\"pallotmode\", \"\");\n}\n\n\n//var tmp_it = tmp_it + \"\\n\" + flow.get(\"it\");\n\nvar post_request = {\n    \"headers\": {\n        \"content-type\": \"application/json; charset=UTF-8\",\n        \"Authorization\": \" Bearer \" + \"<LINE ACCESS KEY>\"\n    },\n    \"payload\": {\n        //\"replyToken\": msg.payload.events[0].replyToken,\n        \"replyToken\": flow.get(\"replyToken\"),\n        \"messages\": [\n            {\n                \"type\": \"text\",\n                \"text\": replytext  +  \"ฅ^•ﻌ•^ฅ\"\n            }\n        ]\n    }\n};\n\nreturn post_request;","outputs":1,"noerr":0,"x":598,"y":386,"wires":[["53ec5a4d.75a8f4"]]}]
